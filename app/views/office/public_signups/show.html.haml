.block
  .content
    - r = public_signup.registration
    - if r.approved?
      = controls do |c|
        - add_button_to(c, 'Show event registrations', :event_id => r.event, :controller => :registrations)
        - add_button_to(c, :waitlist, :action => :waitlist, :icon => 'time', :method => :put)

    - else
      = controls do |c|
        - add_button_to(c, :edit)

      = controls do |c|
        - add_button_to(c, :approve, :action => :approve, :icon => 'ok', :method => :put)
        - if !r.waitlisted?
          - add_button_to(c, :waitlist, :action => :waitlist, :icon => 'time', :method => :put)

    %h3
      Registration request for #{r.event_name}

    - if r.approved?
      %p Request approved #{time_ago_in_words(public_signup.approved_at)} ago.
    - else
      %p
        #{r.role} request by
        #{r.full_name} for
        #{r.event_name}.  Do you approved?

    = render 'public_signup', :public_signup => public_signup
